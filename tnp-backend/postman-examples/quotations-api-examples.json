{
  "info": {
    "name": "Quotations API Examples for Postman",
    "description": "ตัวอย่าง JSON สำหรับทดสอบ Quotations API",
    "version": "1.0.0"
  },
  "base_url": "http://localhost:8000/api/v1",
  "auth": {
    "type": "Bearer Token",
    "note": "ต้องใส่ Bearer Token ใน Headers: Authorization: Bearer YOUR_TOKEN"
  },
  "endpoints": {
    "1. GET /quotations - ดึงรายการใบเสนอราคา": {
      "method": "GET",
      "url": "{{base_url}}/quotations",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "query_parameters": {
        "status": "draft",
        "customer_id": "customer-uuid-here",
        "search": "ค้นหาตามชื่อลูกค้าหรือเลขที่เอกสาร",
        "date_from": "2025-01-01",
        "date_to": "2025-12-31",
        "per_page": "15"
      },
      "example_response": {
        "status": "success",
        "message": "Quotations retrieved successfully",
        "data": {
          "current_page": 1,
          "data": [
            {
              "id": "01234567-89ab-cdef-0123-456789abcdef",
              "quotation_no": "QT202507-0001",
              "customer_id": "customer-uuid",
              "status": "draft",
              "subtotal": 10000.00,
              "tax_rate": 7.00,
              "tax_amount": 700.00,
              "total_amount": 10700.00,
              "quotation_date": "2025-07-25",
              "valid_until": "2025-08-25",
              "customer": {
                "id": "customer-uuid",
                "customer_name": "บริษัท ตัวอย่าง จำกัด"
              }
            }
          ],
          "total": 1,
          "per_page": 15
        }
      }
    },
    "2. POST /quotations - สร้างใบเสนอราคาใหม่": {
      "method": "POST",
      "url": "{{base_url}}/quotations",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "body": {
        "customer_id": "01234567-89ab-cdef-0123-456789abcdef",
        "pricing_request_id": "pricing-request-uuid-here",
        "quotation_date": "2025-07-25",
        "valid_until": "2025-08-25",
        "subtotal": 10000.00,
        "tax_rate": 7.00,
        "remarks": "หมายเหตุเพิ่มเติม",
        "items": [
          {
            "item_name": "เสื้อโปโล",
            "item_description": "เสื้อโปโลสีขาว ไซส์ M",
            "quantity": 100,
            "unit": "ตัว",
            "unit_price": 100.00
          },
          {
            "item_name": "การปัก Logo",
            "item_description": "ปัก Logo หน้าอก",
            "quantity": 100,
            "unit": "จุด",
            "unit_price": 0.00
          }
        ]
      },
      "example_response": {
        "status": "success",
        "message": "Quotation created successfully",
        "data": {
          "id": "01234567-89ab-cdef-0123-456789abcdef",
          "quotation_no": "QT202507-0001",
          "customer_id": "customer-uuid",
          "status": "draft",
          "subtotal": 10000.00,
          "tax_rate": 7.00,
          "tax_amount": 700.00,
          "total_amount": 10700.00,
          "quotation_date": "2025-07-25",
          "valid_until": "2025-08-25",
          "created_at": "2025-07-25T10:00:00.000000Z"
        }
      }
    },
    "3. GET /quotations/{id} - ดูรายละเอียดใบเสนอราคา": {
      "method": "GET",
      "url": "{{base_url}}/quotations/01234567-89ab-cdef-0123-456789abcdef",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "example_response": {
        "status": "success",
        "message": "Quotation retrieved successfully",
        "data": {
          "id": "01234567-89ab-cdef-0123-456789abcdef",
          "quotation_no": "QT202507-0001",
          "customer_id": "customer-uuid",
          "pricing_request_id": "pricing-request-uuid",
          "status": "draft",
          "subtotal": 10000.00,
          "tax_rate": 7.00,
          "tax_amount": 700.00,
          "total_amount": 10700.00,
          "quotation_date": "2025-07-25",
          "valid_until": "2025-08-25",
          "remarks": "หมายเหตุเพิ่มเติม",
          "customer": {
            "id": "customer-uuid",
            "customer_name": "บริษัท ตัวอย่าง จำกัด",
            "phone": "02-123-4567"
          },
          "pricing_request": {
            "id": "pricing-request-uuid",
            "request_no": "PR202507-0001"
          },
          "items": [
            {
              "id": "item-uuid-1",
              "item_name": "เสื้อโปโล",
              "item_description": "เสื้อโปโลสีขาว ไซส์ M",
              "quantity": 100,
              "unit": "ตัว",
              "unit_price": 100.00,
              "total_price": 10000.00
            }
          ],
          "created_by": "user-uuid",
          "created_at": "2025-07-25T10:00:00.000000Z",
          "updated_at": "2025-07-25T10:00:00.000000Z"
        }
      }
    },
    "4. PUT /quotations/{id} - แก้ไขใบเสนอราคา": {
      "method": "PUT",
      "url": "{{base_url}}/quotations/01234567-89ab-cdef-0123-456789abcdef",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "body": {
        "valid_until": "2025-09-25",
        "subtotal": 12000.00,
        "tax_rate": 7.00,
        "remarks": "หมายเหตุที่แก้ไขแล้ว",
        "items": [
          {
            "item_name": "เสื้อโปโล",
            "item_description": "เสื้อโปโลสีขาว ไซส์ M",
            "quantity": 120,
            "unit": "ตัว",
            "unit_price": 100.00
          }
        ]
      },
      "example_response": {
        "status": "success",
        "message": "Quotation updated successfully",
        "data": {
          "id": "01234567-89ab-cdef-0123-456789abcdef",
          "quotation_no": "QT202507-0001",
          "subtotal": 12000.00,
          "tax_amount": 840.00,
          "total_amount": 12840.00,
          "valid_until": "2025-09-25",
          "updated_at": "2025-07-25T11:00:00.000000Z"
        }
      }
    },
    "5. DELETE /quotations/{id} - ลบใบเสนอราคา": {
      "method": "DELETE",
      "url": "{{base_url}}/quotations/01234567-89ab-cdef-0123-456789abcdef",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "example_response": {
        "status": "success",
        "message": "Quotation deleted successfully"
      }
    },
    "6. PATCH /quotations/{id}/status - เปลี่ยนสถานะ": {
      "method": "PATCH",
      "url": "{{base_url}}/quotations/01234567-89ab-cdef-0123-456789abcdef/status",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "body": {
        "status": "approved",
        "remarks": "อนุมัติแล้ว พร้อมดำเนินการต่อ"
      },
      "available_status": [
        "draft",
        "pending_review",
        "approved",
        "rejected",
        "completed"
      ],
      "example_response": {
        "status": "success",
        "message": "Quotation status updated successfully",
        "data": {
          "id": "01234567-89ab-cdef-0123-456789abcdef",
          "quotation_no": "QT202507-0001",
          "status": "approved",
          "approved_by": "user-uuid",
          "approved_at": "2025-07-25T12:00:00.000000Z",
          "version_no": 2
        }
      }
    },
    "7. GET /quotations/{id}/pdf - สร้าง PDF": {
      "method": "GET",
      "url": "{{base_url}}/quotations/01234567-89ab-cdef-0123-456789abcdef/pdf",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "example_response": {
        "status": "success",
        "message": "PDF generated successfully",
        "data": {
          "pdf_url": "http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef/download-pdf"
        }
      }
    },
    "8. GET /quotations/{id}/history - ดูประวัติการเปลี่ยนแปลง": {
      "method": "GET",
      "url": "{{base_url}}/quotations/01234567-89ab-cdef-0123-456789abcdef/history",
      "headers": {
        "Authorization": "Bearer YOUR_TOKEN_HERE",
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "example_response": {
        "status": "success",
        "message": "Quotation history retrieved successfully",
        "data": [
          {
            "id": "history-uuid-1",
            "document_id": "01234567-89ab-cdef-0123-456789abcdef",
            "document_type": "quotation",
            "old_status": null,
            "new_status": "draft",
            "changed_by": "user-uuid",
            "changed_at": "2025-07-25T10:00:00.000000Z",
            "remarks": "สร้างใบเสนอราคาใหม่",
            "user": {
              "user_uuid": "user-uuid",
              "name": "John Doe"
            }
          },
          {
            "id": "history-uuid-2",
            "document_id": "01234567-89ab-cdef-0123-456789abcdef",
            "document_type": "quotation",
            "old_status": "draft",
            "new_status": "approved",
            "changed_by": "manager-uuid",
            "changed_at": "2025-07-25T12:00:00.000000Z",
            "remarks": "อนุมัติแล้ว พร้อมดำเนินการต่อ",
            "user": {
              "user_uuid": "manager-uuid",
              "name": "Jane Manager"
            }
          }
        ]
      }
    }
  },
  "error_responses": {
    "401_unauthorized": {
      "status": "error",
      "message": "Unauthenticated."
    },
    "403_forbidden": {
      "status": "error",
      "message": "Quotation cannot be edited in current status"
    },
    "404_not_found": {
      "status": "error",
      "message": "Quotation not found"
    },
    "422_validation_error": {
      "status": "error",
      "message": "Validation failed",
      "errors": {
        "customer_id": ["The customer id field is required."],
        "items": ["The items field must have at least 1 items."]
      }
    },
    "500_server_error": {
      "status": "error",
      "message": "Failed to create quotation: Database connection error"
    }
  },
  "notes": {
    "authentication": "ต้องมี Bearer Token ใน Authorization header",
    "uuid_format": "ใช้ UUID format สำหรับ ID ทั้งหมด",
    "date_format": "ใช้ format YYYY-MM-DD สำหรับวันที่",
    "status_workflow": "draft → pending_review → approved/rejected → completed",
    "permissions": "สถานะบางอย่างต้องมีสิทธิ์พิเศษในการเปลี่ยน",
    "soft_delete": "การลบเป็น soft delete ข้อมูลยังอยู่ในฐานข้อมูล"
  }
}
