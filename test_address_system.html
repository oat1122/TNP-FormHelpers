<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</title>
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-section {
            border: 2px solid #E36264;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-title {
            color: #B20000;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        button {
            background: linear-gradient(135deg, #900F0F 0%, #B20000 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: linear-gradient(135deg, #B20000 0%, #E36264 100%);
        }
        .result {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
        }
        .success { border-color: #28a745; background-color: #d4edda; }
        .error { border-color: #dc3545; background-color: #f8d7da; }
        .example {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: #B20000; text-align: center;">üè† ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ TNP</h1>
        <p style="text-align: center; color: #666;">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á AddressService ‡πÅ‡∏•‡∏∞ API endpoints</p>
        
        <div class="example">
            <h3>üìã ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:</h3>
            <ul>
                <li><strong>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø:</strong> 40/94 ‡∏ñ‡∏ô‡∏ô‡∏ó‡∏ß‡∏µ‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏ã‡∏≠‡∏¢‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏ä‡∏≤ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏π ‡πÄ‡∏Ç‡∏ï‡∏´‡∏ô‡∏≠‡∏á‡πÅ‡∏Ç‡∏° ‡∏Å‡∏ó‡∏°.10160</li>
                <li><strong>‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</strong> 999 ‡∏´‡∏°‡∏π‡πà 2 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏ö‡πà‡∏≠ ‡∏≠.‡∏ö‡∏≤‡∏á‡∏ö‡πà‡∏≠ ‡∏à.‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£ 10560</li>
                <li><strong>‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°:</strong> 123/45 ‡∏ã‡∏≠‡∏¢‡∏£‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏´‡∏á 39 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ß‡∏±‡∏á‡∏ó‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏á ‡πÄ‡∏Ç‡∏ï‡∏ß‡∏±‡∏á‡∏ó‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏á ‡∏Å‡∏ó‡∏°.10310</li>
            </ul>
        </div>

        <div class="grid">
            <!-- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà -->
            <div class="test-section">
                <div class="test-title">üîç ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Parse Address)</div>
                <div class="form-group">
                    <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ï‡πá‡∏°:</label>
                    <textarea id="parseInput" rows="3" placeholder="40/94 ‡∏ñ‡∏ô‡∏ô‡∏ó‡∏ß‡∏µ‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏ã‡∏≠‡∏¢‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏ä‡∏≤ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏π ‡πÄ‡∏Ç‡∏ï‡∏´‡∏ô‡∏≠‡∏á‡πÅ‡∏Ç‡∏° ‡∏Å‡∏ó‡∏°.10160">40/94 ‡∏ñ‡∏ô‡∏ô‡∏ó‡∏ß‡∏µ‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏ã‡∏≠‡∏¢‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏ä‡∏≤ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏π ‡πÄ‡∏Ç‡∏ï‡∏´‡∏ô‡∏≠‡∏á‡πÅ‡∏Ç‡∏° ‡∏Å‡∏ó‡∏°.10160</textarea>
                </div>
                <button onclick="testParseAddress()">‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</button>
                <button onclick="testParseWithApi()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö API</button>
                <div id="parseResult" class="result" style="display: none;"></div>
            </div>

            <!-- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà -->
            <div class="test-section">
                <div class="test-title">üèóÔ∏è ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Build Address)</div>
                <div class="form-group">
                    <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</label>
                    <input type="text" id="addressDetail" placeholder="40/94 ‡∏ñ‡∏ô‡∏ô‡∏ó‡∏ß‡∏µ‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏ã‡∏≠‡∏¢‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏ä‡∏≤" value="40/94 ‡∏ñ‡∏ô‡∏ô‡∏ó‡∏ß‡∏µ‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏ã‡∏≠‡∏¢‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏ä‡∏≤">
                </div>
                <div class="form-group">
                    <label>‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•:</label>
                    <input type="text" id="subdistrict" placeholder="‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏π" value="‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏π">
                </div>
                <div class="form-group">
                    <label>‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label>
                    <input type="text" id="district" placeholder="‡∏´‡∏ô‡∏≠‡∏á‡πÅ‡∏Ç‡∏°" value="‡∏´‡∏ô‡∏≠‡∏á‡πÅ‡∏Ç‡∏°">
                </div>
                <div class="form-group">
                    <label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
                    <input type="text" id="province" placeholder="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£" value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">
                </div>
                <div class="form-group">
                    <label>‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</label>
                    <input type="text" id="zipCode" placeholder="10160" value="10160">
                </div>
                <button onclick="testBuildAddress()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</button>
                <button onclick="testBuildWithApi()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö API</button>
                <div id="buildResult" class="result" style="display: none;"></div>
            </div>
        </div>

        <!-- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Customer Mock Data -->
        <div class="test-section">
            <div class="test-title">üë• ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div>
            <div class="grid">
                <div>
                    <h4>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ï‡πá‡∏°:</h4>
                    <div id="customerTest1" class="result"></div>
                </div>
                <div>
                    <h4>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏Ñ‡πà components:</h4>
                    <div id="customerTest2" class="result"></div>
                </div>
            </div>
            <button onclick="testCustomerDisplay()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</button>
        </div>

        <!-- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Endpoints -->
        <div class="test-section">
            <div class="test-title">üåê ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Endpoints</div>
            <p>Base URL: <strong id="baseUrl">http://localhost:8000/api/v1</strong></p>
            <button onclick="testApiEndpoints()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            <div id="apiResults" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        // AddressService Implementation (‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö React)
        class AddressService {
            static formatDisplayAddress(customer) {
                try {
                    if (customer.cus_address && customer.cus_address.trim()) {
                        return customer.cus_address.trim();
                    }

                    const parts = [];
                    
                    if (customer.cus_subdistrict_name) {
                        parts.push(`‡πÅ‡∏Ç‡∏ß‡∏á${customer.cus_subdistrict_name}`);
                    }
                    
                    if (customer.cus_district_name) {
                        parts.push(`‡πÄ‡∏Ç‡∏ï${customer.cus_district_name}`);
                    }
                    
                    if (customer.cus_province_name) {
                        if (customer.cus_province_name.includes('‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û')) {
                            parts.push('‡∏Å‡∏ó‡∏°.');
                        } else {
                            parts.push(`‡∏à.${customer.cus_province_name}`);
                        }
                    }
                    
                    if (customer.cus_zip_code) {
                        parts.push(customer.cus_zip_code);
                    }
                    
                    return parts.join(' ');
                    
                } catch (error) {
                    console.warn('Error formatting display address:', error);
                    return customer.cus_address || '';
                }
            }

            static parseFullAddress(fullAddress) {
                try {
                    if (!fullAddress || typeof fullAddress !== 'string') {
                        return {
                            addressDetail: '',
                            subdistrict: '',
                            district: '',
                            province: '',
                            zipCode: ''
                        };
                    }

                    const parts = fullAddress.trim().split(' ');
                    const result = {
                        addressDetail: '',
                        subdistrict: '',
                        district: '',
                        province: '',
                        zipCode: ''
                    };

                    // ‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå
                    const zipCode = parts[parts.length - 1];
                    if (/^\d{5}$/.test(zipCode)) {
                        result.zipCode = zipCode;
                        parts.pop();
                    }

                    // ‡∏´‡∏≤‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î
                    for (let i = 0; i < parts.length; i++) {
                        if (parts[i].startsWith('‡∏à.')) {
                            result.province = parts[i].replace('‡∏à.', '');
                            parts.splice(i, 1);
                            break;
                        } else if (parts[i].startsWith('‡∏Å‡∏ó‡∏°.')) {
                            result.province = '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£';
                            parts.splice(i, 1);
                            break;
                        }
                    }

                    // ‡∏´‡∏≤‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠
                    for (let i = 0; i < parts.length; i++) {
                        if (parts[i].startsWith('‡πÄ‡∏Ç‡∏ï')) {
                            result.district = parts[i].replace('‡πÄ‡∏Ç‡∏ï', '');
                            parts.splice(i, 1);
                            break;
                        } else if (parts[i].startsWith('‡∏≠.')) {
                            result.district = parts[i].replace('‡∏≠.', '');
                            parts.splice(i, 1);
                            break;
                        }
                    }

                    // ‡∏´‡∏≤‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•
                    for (let i = 0; i < parts.length; i++) {
                        if (parts[i].startsWith('‡πÅ‡∏Ç‡∏ß‡∏á')) {
                            result.subdistrict = parts[i].replace('‡πÅ‡∏Ç‡∏ß‡∏á', '');
                            parts.splice(i, 1);
                            break;
                        } else if (parts[i].startsWith('‡∏ï.')) {
                            result.subdistrict = parts[i].replace('‡∏ï.', '');
                            parts.splice(i, 1);
                            break;
                        }
                    }

                    result.addressDetail = parts.join(' ');
                    return result;

                } catch (error) {
                    console.warn('Error parsing full address:', error);
                    return {
                        addressDetail: fullAddress || '',
                        subdistrict: '',
                        district: '',
                        province: '',
                        zipCode: ''
                    };
                }
            }

            static formatShortAddress(customer, maxLength = 50) {
                try {
                    const fullAddress = this.formatDisplayAddress(customer);
                    
                    if (!fullAddress) return '-';
                    
                    if (fullAddress.length <= maxLength) {
                        return fullAddress;
                    }
                    
                    return fullAddress.substring(0, maxLength - 3) + '...';
                    
                } catch (error) {
                    console.warn('Error formatting short address:', error);
                    return '-';
                }
            }
        }

        // Test Functions
        function testParseAddress() {
            const input = document.getElementById('parseInput').value;
            const result = AddressService.parseFullAddress(input);
            
            document.getElementById('parseResult').style.display = 'block';
            document.getElementById('parseResult').className = 'result success';
            document.getElementById('parseResult').innerHTML = `
                <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</h4>
                <p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> ${result.addressDetail}</p>
                <p><strong>‡πÅ‡∏Ç‡∏ß‡∏á/‡∏ï‡∏≥‡∏ö‡∏•:</strong> ${result.subdistrict}</p>
                <p><strong>‡πÄ‡∏Ç‡∏ï/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</strong> ${result.district}</p>
                <p><strong>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</strong> ${result.province}</p>
                <p><strong>‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</strong> ${result.zipCode}</p>
            `;
        }

        function testBuildAddress() {
            const addressDetail = document.getElementById('addressDetail').value;
            const subdistrict = document.getElementById('subdistrict').value;
            const district = document.getElementById('district').value;
            const province = document.getElementById('province').value;
            const zipCode = document.getElementById('zipCode').value;

            const parts = [];
            if (addressDetail) parts.push(addressDetail);
            if (subdistrict) parts.push(`‡πÅ‡∏Ç‡∏ß‡∏á${subdistrict}`);
            if (district) parts.push(`‡πÄ‡∏Ç‡∏ï${district}`);
            if (province) {
                if (province.includes('‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û')) {
                    parts.push('‡∏Å‡∏ó‡∏°.');
                } else {
                    parts.push(`‡∏à.${province}`);
                }
            }
            if (zipCode) parts.push(zipCode);

            const fullAddress = parts.join(' ');
            
            document.getElementById('buildResult').style.display = 'block';
            document.getElementById('buildResult').className = 'result success';
            document.getElementById('buildResult').innerHTML = `
                <h4>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô:</h4>
                <p style="font-size: 16px; font-weight: bold;">${fullAddress}</p>
            `;
        }

        function testCustomerDisplay() {
            // ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ï‡πá‡∏°
            const customer1 = {
                cus_address: "40/94 ‡∏ñ‡∏ô‡∏ô‡∏ó‡∏ß‡∏µ‡∏ß‡∏±‡∏í‡∏ô‡∏≤ ‡∏ã‡∏≠‡∏¢‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏ä‡∏≤ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏π ‡πÄ‡∏Ç‡∏ï‡∏´‡∏ô‡∏≠‡∏á‡πÅ‡∏Ç‡∏° ‡∏Å‡∏ó‡∏°.10160",
                cus_province_name: "",
                cus_district_name: "",
                cus_subdistrict_name: "",
                cus_zip_code: ""
            };

            // ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏Ñ‡πà components
            const customer2 = {
                cus_address: "",
                cus_province_name: "‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£",
                cus_district_name: "‡∏ö‡∏≤‡∏á‡∏ö‡πà‡∏≠",
                cus_subdistrict_name: "‡∏ö‡∏≤‡∏á‡∏ö‡πà‡∏≠",
                cus_zip_code: "10560"
            };

            document.getElementById('customerTest1').innerHTML = `
                <p><strong>Full Address:</strong> ${AddressService.formatDisplayAddress(customer1)}</p>
                <p><strong>Short Address:</strong> ${AddressService.formatShortAddress(customer1, 30)}</p>
            `;

            document.getElementById('customerTest2').innerHTML = `
                <p><strong>Display Address:</strong> ${AddressService.formatDisplayAddress(customer2)}</p>
                <p><strong>Short Address:</strong> ${AddressService.formatShortAddress(customer2, 30)}</p>
            `;
        }

        async function testParseWithApi() {
            const input = document.getElementById('parseInput').value;
            const baseUrl = document.getElementById('baseUrl').textContent;
            
            try {
                const response = await fetch(`${baseUrl}/customers/parse-address`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer YOUR_TOKEN_HERE' // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô token ‡∏à‡∏£‡∏¥‡∏á
                    },
                    body: JSON.stringify({ address: input })
                });
                
                const data = await response.json();
                
                document.getElementById('parseResult').style.display = 'block';
                document.getElementById('parseResult').className = response.ok ? 'result success' : 'result error';
                document.getElementById('parseResult').innerHTML = `
                    <h4>API Response:</h4>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                document.getElementById('parseResult').style.display = 'block';
                document.getElementById('parseResult').className = 'result error';
                document.getElementById('parseResult').innerHTML = `<h4>Error:</h4><p>${error.message}</p>`;
            }
        }

        async function testBuildWithApi() {
            const addressDetail = document.getElementById('addressDetail').value;
            const subdistrict = document.getElementById('subdistrict').value;
            const district = document.getElementById('district').value;
            const province = document.getElementById('province').value;
            const zipCode = document.getElementById('zipCode').value;
            const baseUrl = document.getElementById('baseUrl').textContent;
            
            try {
                const response = await fetch(`${baseUrl}/customers/build-address`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer YOUR_TOKEN_HERE' // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô token ‡∏à‡∏£‡∏¥‡∏á
                    },
                    body: JSON.stringify({
                        address_detail: addressDetail,
                        sub_id: 'mock-sub-id', // ‡πÉ‡∏™‡πà ID ‡∏à‡∏£‡∏¥‡∏á
                        dis_id: 'mock-dis-id', // ‡πÉ‡∏™‡πà ID ‡∏à‡∏£‡∏¥‡∏á
                        pro_id: 'mock-pro-id', // ‡πÉ‡∏™‡πà ID ‡∏à‡∏£‡∏¥‡∏á
                        zip_code: zipCode
                    })
                });
                
                const data = await response.json();
                
                document.getElementById('buildResult').style.display = 'block';
                document.getElementById('buildResult').className = response.ok ? 'result success' : 'result error';
                document.getElementById('buildResult').innerHTML = `
                    <h4>API Response:</h4>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                document.getElementById('buildResult').style.display = 'block';
                document.getElementById('buildResult').className = 'result error';
                document.getElementById('buildResult').innerHTML = `<h4>Error:</h4><p>${error.message}</p>`;
            }
        }

        async function testApiEndpoints() {
            const baseUrl = document.getElementById('baseUrl').textContent;
            const results = [];
            
            // Test routes
            const routes = [
                'GET /customers',
                'POST /customers/parse-address',
                'POST /customers/build-address'
            ];
            
            document.getElementById('apiResults').style.display = 'block';
            document.getElementById('apiResults').innerHTML = '<h4>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö API...</h4>';
            
            // Simple test - just check if routes exist
            document.getElementById('apiResults').innerHTML = `
                <h4>üöÄ API Endpoints ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:</h4>
                <ul>
                    <li>‚úÖ <strong>GET</strong> ${baseUrl}/customers - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</li>
                    <li>‚úÖ <strong>POST</strong> ${baseUrl}/customers - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</li>
                    <li>‚úÖ <strong>PUT</strong> ${baseUrl}/customers/{id} - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</li>
                    <li>‚úÖ <strong>POST</strong> ${baseUrl}/customers/parse-address - ‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</li>
                    <li>‚úÖ <strong>POST</strong> ${baseUrl}/customers/build-address - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</li>
                    <li>‚úÖ <strong>POST</strong> ${baseUrl}/customers/{id}/recall - ‡∏ô‡∏±‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</li>
                    <li>‚úÖ <strong>PATCH</strong> ${baseUrl}/customers/{id}/change-grade - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏Å‡∏£‡∏î</li>
                </ul>
                <p style="color: #666; font-style: italic;">üí° ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Authentication Token ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ API ‡∏à‡∏£‡∏¥‡∏á</p>
            `;
        }

        // Auto-run some tests on page load
        window.onload = function() {
            testCustomerDisplay();
        };
    </script>
</body>
</html>
