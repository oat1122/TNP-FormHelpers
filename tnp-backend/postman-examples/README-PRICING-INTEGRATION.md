# üîó Pricing Integration API Testing Guide

## üìã ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Pricing ‡∏Å‡∏±‡∏ö Accounting

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å `pricing_requests`, `pricing_request_notes`, ‡πÅ‡∏•‡∏∞ `master_customers` ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üöÄ API Endpoints

### 1. **GET** `/api/v1/pricing-integration/completed-requests` - ‡∏î‡∏∂‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß

**URL:** `http://localhost:8000/api/v1/pricing-integration/completed-requests`

**Query Parameters:**
- `customer_id` - UUID ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
- `search` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£, ‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô, ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
- `date_from` - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (YYYY-MM-DD)
- `date_to` - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (YYYY-MM-DD)
- `per_page` - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤

**Response:**
```json
{
  "status": "success",
  "message": "Completed pricing requests retrieved successfully",
  "data": {
    "current_page": 1,
    "data": [
      {
        "pr_id": "pricing-request-uuid",
        "pr_no": "P2025-07-0001",
        "pr_work_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß",
        "pr_quantity": "100",
        "pr_status_id": "20db8be1-092b-11f0-b223-38ca84abdf0a",
        "status": "‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß",
        "pricingCustomer": {
          "cus_name": "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î",
          "cus_company": "Example Company Ltd.",
          "cus_email": "contact@example.com"
        },
        "note_price": [
          {
            "prn_text": "‡∏£‡∏≤‡∏Ñ‡∏≤ 150 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß ‡∏£‡∏ß‡∏° 15,000 ‡∏ö‡∏≤‡∏ó",
            "prn_created_date": "2025-07-25T10:00:00.000000Z"
          }
        ]
      }
    ],
    "total": 1
  }
}
```

---

### 2. **GET** `/api/v1/pricing-integration/requests/{id}` - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô

**URL:** `http://localhost:8000/api/v1/pricing-integration/requests/pricing-request-uuid`

**Response:**
```json
{
  "status": "success",
  "message": "Pricing request details retrieved successfully",
  "data": {
    "pricing_request": {
      "id": "pricing-request-uuid",
      "no": "P2025-07-0001",
      "work_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß",
      "quantity": "100",
      "due_date": "2025-08-15T00:00:00.000000Z",
      "latest_price": 15000.00
    },
    "customer": {
      "id": "customer-uuid",
      "name": "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î",
      "company": "Example Company Ltd.",
      "email": "contact@example.com",
      "phone": "02-123-4567"
    },
    "items": [
      {
        "item_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß",
        "item_description": "‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô: Basic Polo, ‡∏ú‡πâ‡∏≤: Cotton 100%, ‡∏™‡∏µ: ‡∏Ç‡∏≤‡∏ß, ‡πÑ‡∏ã‡∏™‡πå: M,L,XL",
        "quantity": 100,
        "unit": "‡∏ä‡∏¥‡πâ‡∏ô",
        "unit_price": 150.00
      },
      {
        "item_name": "‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏Å",
        "item_description": "‡∏õ‡∏±‡∏Å Logo ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å",
        "quantity": 100,
        "unit": "‡∏à‡∏∏‡∏î",
        "unit_price": 0
      }
    ],
    "notes": [
      {
        "type": 2,
        "text": "‡∏£‡∏≤‡∏Ñ‡∏≤ 150 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß ‡∏£‡∏ß‡∏° 15,000 ‡∏ö‡∏≤‡∏ó",
        "created_date": "2025-07-25T10:00:00.000000Z",
        "created_by": "Manager"
      }
    ]
  }
}
```

---

### 3. **POST** `/api/v1/pricing-integration/create-quotation` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤

**URL:** `http://localhost:8000/api/v1/pricing-integration/create-quotation`

**Body (JSON):**
```json
{
  "pricing_request_id": "pricing-request-uuid",
  "valid_until": "2025-08-25",
  "deposit_amount": 7500.00,
  "payment_terms": "‡∏°‡∏±‡∏î‡∏à‡∏≥ 50% ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á",
  "remarks": "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Pricing ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",
  "items": [
    {
      "item_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß",
      "item_description": "‡πÅ‡∏û‡∏ó‡πÄ‡∏ó‡∏¥‡∏£‡πå‡∏ô: Basic Polo, ‡∏ú‡πâ‡∏≤: Cotton 100%, ‡∏™‡∏µ: ‡∏Ç‡∏≤‡∏ß, ‡πÑ‡∏ã‡∏™‡πå: M,L,XL",
      "quantity": 100,
      "unit": "‡∏ä‡∏¥‡πâ‡∏ô",
      "unit_price": 150.00
    }
  ]
}
```

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏´‡∏≤‡∏Å `items` ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏°‡∏≤ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• pricing request

**Response:**
```json
{
  "status": "success",
  "message": "Quotation created successfully from pricing request",
  "data": {
    "id": "quotation-uuid",
    "quotation_no": "QT202507-0001",
    "pricing_request_id": "pricing-request-uuid",
    "customer_id": "customer-uuid",
    "status": "draft",
    "subtotal": 15000.00,
    "tax_rate": 7.00,
    "tax_amount": 1050.00,
    "total_amount": 16050.00,
    "deposit_amount": 7500.00,
    "remaining_amount": 8550.00,
    "valid_until": "2025-08-25",
    "items": [...],
    "customer": {...},
    "pricingRequest": {...}
  }
}
```

---

### 4. **GET** `/api/v1/pricing-integration/requests/{id}/summary` - ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏á‡∏≤‡∏ô

**URL:** `http://localhost:8000/api/v1/pricing-integration/requests/pricing-request-uuid/summary`

**Response:**
```json
{
  "status": "success",
  "message": "Pricing request summary retrieved successfully",
  "data": {
    "pricing_request": {
      "id": "pricing-request-uuid",
      "no": "P2025-07-0001",
      "work_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß",
      "quantity": "100",
      "latest_price": 15000.00
    },
    "customer": {
      "id": "customer-uuid",
      "name": "‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏à‡∏≥‡∏Å‡∏±‡∏î",
      "company": "Example Company Ltd.",
      "email": "contact@example.com",
      "phone": "02-123-4567",
      "address": "123 ‡∏ñ‡∏ô‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø",
      "tax_id": "0123456789012"
    },
    "items": [...],
    "notes": [...],
    "can_create_quotation": true
  }
}
```

---

## üìä Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### 1. **‡∏î‡∏∂‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß:**
```
GET /pricing-integration/completed-requests
‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ "‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß" ‡∏´‡∏£‡∏∑‡∏≠ "Complete"
‚Üí ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤
```

### 2. **‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô:**
```
GET /pricing-integration/requests/{id}
‚Üí ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏à‡∏≤‡∏Å pricing_requests
‚Üí ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å master_customers
‚Üí ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å pricing_request_notes
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
```

### 3. **‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤:**
```
POST /pricing-integration/create-quotation
‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á
‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Quotation ‡πÅ‡∏•‡∏∞ QuotationItems
‚Üí ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏©‡∏µ
‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
```

---

## üîç Logic ‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å `pricing_request_notes` ‡∏ó‡∏µ‡πà:
- `prn_note_type = 2` (‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤)
- `prn_is_deleted = false`
- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° `prn_created_date` ‡∏à‡∏≤‡∏Å‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤

**‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:**
- "‡∏£‡∏≤‡∏Ñ‡∏≤ 150 ‡∏ö‡∏≤‡∏ó‡∏ï‡πà‡∏≠‡∏ï‡∏±‡∏ß"
- "15,000 ‡∏ö‡∏≤‡∏ó"
- "150.00"
- "15000"

---

## ‚ö†Ô∏è ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤

1. **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô:** ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô "‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß" ‡∏´‡∏£‡∏∑‡∏≠ "Complete"
2. **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:** ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ
3. **‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥:** ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ
4. **‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö:** `pr_is_deleted = false`

---

## üí° ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### **Step 1: ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô**
```bash
curl -X GET "http://localhost:8000/api/v1/pricing-integration/completed-requests" \
-H "Authorization: Bearer YOUR_TOKEN" \
-H "Accept: application/json"
```

### **Step 2: ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**
```bash
curl -X GET "http://localhost:8000/api/v1/pricing-integration/requests/PRICING_ID" \
-H "Authorization: Bearer YOUR_TOKEN" \
-H "Accept: application/json"
```

### **Step 3: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤**
```bash
curl -X POST "http://localhost:8000/api/v1/pricing-integration/create-quotation" \
-H "Authorization: Bearer YOUR_TOKEN" \
-H "Content-Type: application/json" \
-d '{
  "pricing_request_id": "PRICING_ID",
  "valid_until": "2025-08-25",
  "deposit_amount": 7500
}'
```

---

## üéØ Status Codes ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- `20db8be1-092b-11f0-b223-38ca84abdf0a` = "‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß"
- `20db8c1d-092b-11f0-b223-38ca84abdf0a` = "Complete"

‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö Accounting ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Pricing ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û! üöÄ
