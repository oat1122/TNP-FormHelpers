# üìã Quotations API Testing Guide

## üöÄ Quick Start

### 1. Authentication
‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ Token ‡∏Å‡πà‡∏≠‡∏ô:

**POST** `/api/v1/login`
```json
{
  "username": "your_username",
  "password": "your_password"
}
```

**Response:**
```json
{
  "status": "success",
  "data": {
    "token": "YOUR_BEARER_TOKEN_HERE",
    "user": {...}
  }
}
```

### 2. Headers ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å Request
```
Authorization: Bearer YOUR_TOKEN_HERE
Accept: application/json
Content-Type: application/json
```

---

## üìù API Endpoints Testing

### 1. **GET** `/api/v1/quotations` - ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤

**URL:** `http://localhost:8000/api/v1/quotations`

**Query Parameters (Optional):**
- `status` - draft, pending_review, approved, rejected, completed
- `customer_id` - UUID ‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
- `search` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
- `date_from` - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (YYYY-MM-DD)
- `date_to` - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (YYYY-MM-DD)
- `per_page` - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (default: 15)

**Example URL with params:**
```
http://localhost:8000/api/v1/quotations?status=draft&per_page=10
```

---

### 2. **POST** `/api/v1/quotations` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡∏°‡πà

**URL:** `http://localhost:8000/api/v1/quotations`

**Body (JSON):**
```json
{
  "customer_id": "01234567-89ab-cdef-0123-456789abcdef",
  "pricing_request_id": "pricing-request-uuid-here",
  "quotation_date": "2025-07-25",
  "valid_until": "2025-08-25",
  "subtotal": 10000.00,
  "tax_rate": 7.00,
  "remarks": "‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",
  "items": [
    {
      "item_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•",
      "item_description": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡πÑ‡∏ã‡∏™‡πå M",
      "quantity": 100,
      "unit": "‡∏ï‡∏±‡∏ß",
      "unit_price": 100.00
    },
    {
      "item_name": "‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏Å Logo",
      "item_description": "‡∏õ‡∏±‡∏Å Logo ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å",
      "quantity": 100,
      "unit": "‡∏à‡∏∏‡∏î",
      "unit_price": 0.00
    }
  ]
}
```

---

### 3. **GET** `/api/v1/quotations/{id}` - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤

**URL:** `http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef`

*‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ body*

---

### 4. **PUT** `/api/v1/quotations/{id}` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤

**URL:** `http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef`

**Body (JSON):**
```json
{
  "valid_until": "2025-09-25",
  "subtotal": 12000.00,
  "tax_rate": 7.00,
  "remarks": "‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß",
  "items": [
    {
      "item_name": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•",
      "item_description": "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡πÇ‡∏õ‡πÇ‡∏•‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡πÑ‡∏ã‡∏™‡πå M",
      "quantity": 120,
      "unit": "‡∏ï‡∏±‡∏ß",
      "unit_price": 100.00
    }
  ]
}
```

---

### 5. **DELETE** `/api/v1/quotations/{id}` - ‡∏•‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤

**URL:** `http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef`

*‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ body*

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏•‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ draft ‡∏´‡∏£‡∏∑‡∏≠ rejected ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

---

### 6. **PATCH** `/api/v1/quotations/{id}/status` - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞

**URL:** `http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef/status`

**Body (JSON):**
```json
{
  "status": "approved",
  "remarks": "‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠"
}
```

**Available Status:**
- `draft` - ‡∏£‡πà‡∏≤‡∏á
- `pending_review` - ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
- `approved` - ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
- `rejected` - ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
- `completed` - ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô

---

### 7. **GET** `/api/v1/quotations/{id}/pdf` - ‡∏™‡∏£‡πâ‡∏≤‡∏á PDF

**URL:** `http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef/pdf`

*‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ body*

---

### 8. **GET** `/api/v1/quotations/{id}/history` - ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

**URL:** `http://localhost:8000/api/v1/quotations/01234567-89ab-cdef-0123-456789abcdef/history`

*‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ body*

---

## ‚ö†Ô∏è Common Error Responses

### 401 Unauthorized
```json
{
  "status": "error",
  "message": "Unauthenticated."
}
```

### 404 Not Found
```json
{
  "status": "error",
  "message": "Quotation not found"
}
```

### 422 Validation Error
```json
{
  "status": "error",
  "message": "Validation failed",
  "errors": {
    "customer_id": ["The customer id field is required."],
    "items": ["The items field must have at least 1 items."]
  }
}
```

### 403 Forbidden
```json
{
  "status": "error",
  "message": "Quotation cannot be edited in current status"
}
```

---

## üí° Testing Tips

1. **‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ GET** `/quotations` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. **‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö** ‡∏î‡πâ‡∏ß‡∏¢ POST ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö endpoints ‡∏≠‡∏∑‡πà‡∏ô
3. **‡πÉ‡∏ä‡πâ UUID ‡∏à‡∏£‡∏¥‡∏á** ‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö customer_id ‡πÅ‡∏•‡∏∞ pricing_request_id
4. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Status Workflow** - ‡∏ö‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡πÑ‡∏î‡πâ
5. **‡πÉ‡∏ä‡πâ Postman Collection** - import ‡πÑ‡∏ü‡∏•‡πå JSON ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å

---

## üîß Troubleshooting

**‡∏ñ‡πâ‡∏≤ Server ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á:**
```bash
cd d:\01oat\TNP-FormHelpers\tnp-backend
php artisan serve
```

**‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ Database Error:**
```bash
php artisan migrate
php artisan config:clear
php artisan route:clear
```

**‡∏ñ‡πâ‡∏≤ Authentication Error:**
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Bearer Token ‡πÉ‡∏ô Headers
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Token ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
- Login ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ Token ‡πÉ‡∏´‡∏°‡πà
